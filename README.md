# Task Tracker
## Project description

Implemented Web API for entering project data into the database. Solution implements task storage by the project (task tracker).

The model contains 2 basic entities: Projects and Tasks. Each task can be related to only one Project, each Project can contain many tasks. Entities are stored in DataBase (MS SQL Server).

## Model hierarchy
**SiBaseEntity** (abstract base class)
+ **Id** (primary key): int
+ **Name**: string
+ **ObjectVersion**: byte[]

**SiTask** (Task) is an instance that contains 5 properties with backing fields:
+ **ProjectId**: (foreign key): int
+ **Project**: reference to Project entity (Owner)
+ **Description**: string
+ **Priority**: int
+ **Status**: enum

**SiProject** (Project) is an instance that contains 6 properties with backing fields:

+ **Priority**: int
+ **Start date**: DateTime
+ **Completion date**: DateTime
+ **Status**: enum
+ **Tasks**: Список заданий

Both entities are inherited from single abstract base class which provides Database controlled Id (key) property and ObjectVersion (rowversion) property. **ObjectVersion** provides Concurrency Access Control during update Database operations.
Solution provides basic actions on instances: **Create, Remove, Update, Delete.**

## Used technologies

+ C#
+ ASP.NET Core 6.0
+ ASP.NET Core Web API
+ Entity Framework Core 6.0 / Code First / Fluent API / DataAnnotations
+ MS SQL Server
+ Dependency Injection
+ Serilog logger (Publicly available NuGet)
+ Microsoft logger

## Design patterns
+ Domain Driven Design
+ Repository Pattern (Unit of Work, Repository): Mediator to CRUD operations.
+ POCO model classes

## Architecture N-tiers Three-level

+ DAL (data access level): Repository, Entity Framework
+ Domain (Model): POCO entity classes
+ Representation (Web API)

## Functionality

+ Create / view / edit / delete information about projects
+ Create / view / edit / delete task information
+ Add and remove tasks from a project (one project can contain several tasks)
+ View all tasks in the project

## Usage

First create a local SQL Server Database and set SQL Server name and Database name in configuration file (appsettings.json)

Sample data. The Database will be automatically created and seeded with sample data (Projects and related Tasks) by DbContext OnModelCreating method.

Then open solution in Microsoft Visual Studio. .NET 6.0 must be installed. 

## Using API

To test API methods, one should send http requests, containing required data including serialized objects. In response application will send http message with status code and return data (serialized objects) in the json format.

To serialize/deserialize data System.Text.Json namespace is being used, Json options to avoid loops and preserve references while serializing complex objects which causes extra metadata injected in the Json response by Serializer.

To test API methods Swagger client was used.

Currently configured Application URL is: **https://localhost:7176/TaskManager/**, which will be references below as **[root]**.

### Currently available methods
#### Projects

Route: [root]+Projects.

HTTPGet ().

**Method returns** all Projects, including related Tasks. Format: serialized Json with metadata to preserve references (to avoid loops while serializing or data loss).

#### Tasks

Route: [root]+Tasks.

HTTPGet ().

**Method returns** all Tasks, including Project (owner). Format: serialized Json with metadata to preserve references (to avoid loops while serializing or data loss).

#### Project

Route: [root]+ProjectGet.

HTTPGet (int id), where id is the key of the Project to return.

**Method returns:**

+ **Success**: HTTP200 and serialized Project with all related Tasks.
+ **If not found**: HTTP404;

#### Task

Route: [root]+TaskGet.

HTTPGet (int id), where id is the key of the Task to return.

**Method returns**:

+ **Success**: HTTP200 and serialized Task with referenced Project (Owner).
+ **If not found**: HTTP404;

#### Create new Task

Route: [root]+TaskGet.

HTTPGet (int id), where id is the key of the Task to return.

**Method returns**:

+ **Success**: HTTP200 and serialized Task with referenced Project (Owner).
+ **If not found**: HTTP404;

#### Create new Project
Route: [root]+ProjectAdd.

#HTTPPost (SiProject task)#, where **project** is a new project to be processed.

Http request must contain serialized project with user defined properties, except **Id** (int) and **ObjVersion** (byte): Id must be set to 0 (default), ObjVersion – empty string.

Test serialized data file is "TaskManagerTT\RequestExamples\ProjectTestAdd.json".

**Method returns**:

+ **Success**: HTTP200 and serialized Project with generated by database Id and ObjectVersion..
+ **Internal Error**: HTTP500.

#### Create new Task
Route: [root]+TaskAdd.

#HTTPPost (SiTask task)#, where **task** is a new instance SiTask to be processed.

Http request must contain serialized **task** with user defined properties, except **Id** (int) and **ObjVersion** (byte): **Id** must be set to 0 (default), **ObjVersion** – empty string.

Test serialized data file is "TaskManagerTT\RequestExamples\TaskTestAdd.json".

**Method returns**:

+ **Success**: HTTP200 and serialized Task.
+ **Internal Error**: HTTP500.

#### Update existing Task

Route: [root]+ TaskUpdate.

HTTPPost (SiTask task), where **task** is an instance SiTask to be processed.

Http request must contain serialized **task** with user defined properties, including **Id** (int) of existing task to update and **ObjVersion** (byte), except **Project** property, the updated task will be linked to Project (Owner) by **ProjectId**

Test serialized data file is "TaskManagerTT\RequestExamples\TaskTestUpdate.json".

**Method returns**:

+ **Success**: HTTP200 and serialized updated Task.
+ **Internal Error**: HTTP500.

#### Update existing Project

Route: [root]+ ProjectUpdate.

HTTPPost (SiProject project), where **project** is an instance SiProject to be processed.

Http request must contain serialized **Project** with user defined properties, including **Id** (int) of existing task to update and **ObjVersion** (byte), except **Tasks** property, the updated Project (Owner) will be linked to related tasks by **ProjectId**

Test serialized data file is "TaskManagerTT\RequestExamples\ProjectTestUpdate.json".

**Method returns**:

+ **Success**: HTTP200 and serialized updated Project.
+ **Internal Error**: HTTP500.

#### Delete existing Task
Route: [root]+ TaskDelete.

HTTPPost (SiTask task), where **task** is an instance SiTask to be processed.

Http request must contain serialized **Task** with user defined properties, including **Id** (int) of existing task to delete and **ObjVersion** (byte), except **Project** property.

Test serialized data file is "TaskManagerTT\RequestExamples\ TaskTestDelete.json".

**Method returns**:

+ **Success**: HTTP200.
+ **Internal Error**: HTTP500.

#### Delete existing Project
Route: [root]+ ProjectDelete.

HTTPPost (SiProject project), where **project** is an instance SiProject to be processed.

Http request must contain serialized **Project** with user defined properties, including **Id** (int) of existing task to update and **ObjVersion** (byte), except **Tasks** property. Deleting Project entity will perform cascade deleting which is controlled by Database engine all related task entities.

Test serialized data file is "TaskManagerTT\RequestExamples\ ProjectTestDelete.json".

**Method returns**:
+ **Success**: HTTP200.
+ **Internal Error**: HTTP500.

## Technical support
unsupported

## Authors
Ivan Sumin
## Contacts
ivan.suminkf@gmail.com

## Project status
Development in progress

